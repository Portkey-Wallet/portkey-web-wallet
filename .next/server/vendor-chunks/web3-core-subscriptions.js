"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/web3-core-subscriptions";
exports.ids = ["vendor-chunks/web3-core-subscriptions"];
exports.modules = {

/***/ "(ssr)/./node_modules/web3-core-subscriptions/lib/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/web3-core-subscriptions/lib/index.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file index.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\n\nvar Subscription = __webpack_require__(/*! ./subscription.js */ \"(ssr)/./node_modules/web3-core-subscriptions/lib/subscription.js\");\nvar Subscriptions = function Subscriptions(options) {\n    this.name = options.name;\n    this.type = options.type;\n    this.subscriptions = options.subscriptions || {};\n    this.requestManager = null;\n};\nSubscriptions.prototype.setRequestManager = function (rm) {\n    this.requestManager = rm;\n};\nSubscriptions.prototype.attachToObject = function (obj) {\n    var func = this.buildCall();\n    var name = this.name.split('.');\n    if (name.length > 1) {\n        obj[name[0]] = obj[name[0]] || {};\n        obj[name[0]][name[1]] = func;\n    }\n    else {\n        obj[name[0]] = func;\n    }\n};\nSubscriptions.prototype.buildCall = function () {\n    var _this = this;\n    return function () {\n        if (!_this.subscriptions[arguments[0]]) {\n            console.warn('Subscription ' + JSON.stringify(arguments[0]) + ' doesn\\'t exist. Subscribing anyway.');\n        }\n        var subscription = new Subscription({\n            subscription: _this.subscriptions[arguments[0]] || {},\n            requestManager: _this.requestManager,\n            type: _this.type\n        });\n        return subscription.subscribe.apply(subscription, arguments);\n    };\n};\nmodule.exports = {\n    subscriptions: Subscriptions,\n    subscription: Subscription\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvd2ViMy1jb3JlLXN1YnNjcmlwdGlvbnMvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7QUFDYixtQkFBbUIsbUJBQU8sQ0FBQywyRkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcG9ydGtleS9uZXh0LWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvd2ViMy1jb3JlLXN1YnNjcmlwdGlvbnMvbGliL2luZGV4LmpzPzA5ZGUiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgICBUaGlzIGZpbGUgaXMgcGFydCBvZiB3ZWIzLmpzLlxuXG4gICAgd2ViMy5qcyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgd2ViMy5qcyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB3ZWIzLmpzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cbi8qKlxuICogQGZpbGUgaW5kZXguanNcbiAqIEBhdXRob3IgRmFiaWFuIFZvZ2Vsc3RlbGxlciA8ZmFiaWFuQGV0aGVyZXVtLm9yZz5cbiAqIEBkYXRlIDIwMTdcbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgU3Vic2NyaXB0aW9uID0gcmVxdWlyZSgnLi9zdWJzY3JpcHRpb24uanMnKTtcbnZhciBTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24gU3Vic2NyaXB0aW9ucyhvcHRpb25zKSB7XG4gICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBvcHRpb25zLnN1YnNjcmlwdGlvbnMgfHwge307XG4gICAgdGhpcy5yZXF1ZXN0TWFuYWdlciA9IG51bGw7XG59O1xuU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuc2V0UmVxdWVzdE1hbmFnZXIgPSBmdW5jdGlvbiAocm0pIHtcbiAgICB0aGlzLnJlcXVlc3RNYW5hZ2VyID0gcm07XG59O1xuU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuYXR0YWNoVG9PYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIGZ1bmMgPSB0aGlzLmJ1aWxkQ2FsbCgpO1xuICAgIHZhciBuYW1lID0gdGhpcy5uYW1lLnNwbGl0KCcuJyk7XG4gICAgaWYgKG5hbWUubGVuZ3RoID4gMSkge1xuICAgICAgICBvYmpbbmFtZVswXV0gPSBvYmpbbmFtZVswXV0gfHwge307XG4gICAgICAgIG9ialtuYW1lWzBdXVtuYW1lWzFdXSA9IGZ1bmM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvYmpbbmFtZVswXV0gPSBmdW5jO1xuICAgIH1cbn07XG5TdWJzY3JpcHRpb25zLnByb3RvdHlwZS5idWlsZENhbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIV90aGlzLnN1YnNjcmlwdGlvbnNbYXJndW1lbnRzWzBdXSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdTdWJzY3JpcHRpb24gJyArIEpTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1swXSkgKyAnIGRvZXNuXFwndCBleGlzdC4gU3Vic2NyaWJpbmcgYW55d2F5LicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogX3RoaXMuc3Vic2NyaXB0aW9uc1thcmd1bWVudHNbMF1dIHx8IHt9LFxuICAgICAgICAgICAgcmVxdWVzdE1hbmFnZXI6IF90aGlzLnJlcXVlc3RNYW5hZ2VyLFxuICAgICAgICAgICAgdHlwZTogX3RoaXMudHlwZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5zdWJzY3JpYmUuYXBwbHkoc3Vic2NyaXB0aW9uLCBhcmd1bWVudHMpO1xuICAgIH07XG59O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9ucyxcbiAgICBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvblxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/web3-core-subscriptions/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/web3-core-subscriptions/lib/subscription.js":
/*!******************************************************************!*\
  !*** ./node_modules/web3-core-subscriptions/lib/subscription.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file subscription.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\n\nvar errors = (__webpack_require__(/*! web3-core-helpers */ \"(ssr)/./node_modules/web3-core-helpers/lib/index.js\").errors);\nvar EventEmitter = __webpack_require__(/*! eventemitter3 */ \"(ssr)/./node_modules/eventemitter3/index.js\");\nvar formatters = (__webpack_require__(/*! web3-core-helpers */ \"(ssr)/./node_modules/web3-core-helpers/lib/index.js\").formatters);\nfunction identity(value) {\n    return value;\n}\nfunction Subscription(options) {\n    EventEmitter.call(this);\n    this.id = null;\n    this.callback = identity;\n    this.arguments = null;\n    this.lastBlock = null; // \"from\" block tracker for backfilling events on reconnection\n    this.options = {\n        subscription: options.subscription,\n        type: options.type,\n        requestManager: options.requestManager\n    };\n}\n// INHERIT\nSubscription.prototype = Object.create(EventEmitter.prototype);\nSubscription.prototype.constructor = Subscription;\n/**\n * Should be used to extract callback from array of arguments. Modifies input param\n *\n * @method extractCallback\n * @param {Array} arguments\n * @return {Function|Null} callback, if exists\n */\nSubscription.prototype._extractCallback = function (args) {\n    if (typeof args[args.length - 1] === 'function') {\n        return args.pop(); // modify the args array!\n    }\n};\n/**\n * Should be called to check if the number of arguments is correct\n *\n * @method validateArgs\n * @param {Array} arguments\n * @throws {Error} if it is not\n */\nSubscription.prototype._validateArgs = function (args) {\n    var subscription = this.options.subscription;\n    if (!subscription)\n        subscription = {};\n    if (!subscription.params)\n        subscription.params = 0;\n    if (args.length !== subscription.params) {\n        throw errors.InvalidNumberOfParams(args.length, subscription.params, subscription.subscriptionName);\n    }\n};\n/**\n * Should be called to format input args of method\n *\n * @method formatInput\n * @param {Array}\n * @return {Array}\n */\nSubscription.prototype._formatInput = function (args) {\n    var subscription = this.options.subscription;\n    if (!subscription) {\n        return args;\n    }\n    if (!subscription.inputFormatter) {\n        return args;\n    }\n    var formattedArgs = subscription.inputFormatter.map(function (formatter, index) {\n        return formatter ? formatter(args[index]) : args[index];\n    });\n    return formattedArgs;\n};\n/**\n * Should be called to format output(result) of method\n *\n * @method formatOutput\n * @param result {Object}\n * @return {Object}\n */\nSubscription.prototype._formatOutput = function (result) {\n    var subscription = this.options.subscription;\n    return (subscription && subscription.outputFormatter && result) ? subscription.outputFormatter(result) : result;\n};\n/**\n * Should create payload from given input args\n *\n * @method toPayload\n * @param {Array} args\n * @return {Object}\n */\nSubscription.prototype._toPayload = function (args) {\n    var params = [];\n    this.callback = this._extractCallback(args) || identity;\n    if (!this.subscriptionMethod) {\n        this.subscriptionMethod = args.shift();\n        // replace subscription with given name\n        if (this.options.subscription.subscriptionName) {\n            this.subscriptionMethod = this.options.subscription.subscriptionName;\n        }\n    }\n    if (!this.arguments) {\n        this.arguments = this._formatInput(args);\n        this._validateArgs(this.arguments);\n        args = []; // make empty after validation\n    }\n    // re-add subscriptionName\n    params.push(this.subscriptionMethod);\n    params = params.concat(this.arguments);\n    if (args.length) {\n        throw new Error('Only a callback is allowed as parameter on an already instantiated subscription.');\n    }\n    return {\n        method: this.options.type + '_subscribe',\n        params: params\n    };\n};\n/**\n * Unsubscribes and clears callbacks\n *\n * @method unsubscribe\n * @return {Object}\n */\nSubscription.prototype.unsubscribe = function (callback) {\n    this.options.requestManager.removeSubscription(this.id, callback);\n    this.id = null;\n    this.lastBlock = null;\n    this.removeAllListeners();\n};\n/**\n * Subscribes and watches for changes\n *\n * @method subscribe\n * @param {String} subscription the subscription\n * @param {Object} options the options object with address topics and fromBlock\n * @return {Object}\n */\nSubscription.prototype.subscribe = function () {\n    var _this = this;\n    var args = Array.prototype.slice.call(arguments);\n    var payload = this._toPayload(args);\n    if (!payload) {\n        return this;\n    }\n    // throw error, if provider is not set\n    if (!this.options.requestManager.provider) {\n        setTimeout(function () {\n            var err1 = new Error('No provider set.');\n            _this.callback(err1, null, _this);\n            _this.emit('error', err1);\n        }, 0);\n        return this;\n    }\n    // throw error, if provider doesnt support subscriptions\n    if (!this.options.requestManager.provider.on) {\n        setTimeout(function () {\n            var err2 = new Error('The current provider doesn\\'t support subscriptions: ' +\n                _this.options.requestManager.provider.constructor.name);\n            _this.callback(err2, null, _this);\n            _this.emit('error', err2);\n        }, 0);\n        return this;\n    }\n    // Re-subscription only: continue fetching from the last block we received.\n    // a dropped connection may have resulted in gaps in the logs...\n    if (this.lastBlock && !!this.options.params && typeof this.options.params === 'object') {\n        payload.params[1] = this.options.params;\n        payload.params[1].fromBlock = formatters.inputBlockNumberFormatter(this.lastBlock + 1);\n    }\n    // if id is there unsubscribe first\n    if (this.id) {\n        this.unsubscribe();\n    }\n    // store the params in the options object\n    this.options.params = payload.params[1];\n    // get past logs, if fromBlock is available\n    if (payload.params[0] === 'logs' && !!payload.params[1] && typeof payload.params[1] === 'object' && payload.params[1].hasOwnProperty('fromBlock') && isFinite(payload.params[1].fromBlock)) {\n        // send the subscription request\n        // copy the params to avoid race-condition with deletion below this block\n        var blockParams = Object.assign({}, payload.params[1]);\n        this.options.requestManager.send({\n            method: 'eth_getLogs',\n            params: [blockParams]\n        }, function (err, logs) {\n            if (!err) {\n                logs.forEach(function (log) {\n                    var output = _this._formatOutput(log);\n                    _this.callback(null, output, _this);\n                    _this.emit('data', output);\n                });\n                // TODO subscribe here? after the past logs?\n            }\n            else {\n                setTimeout(function () {\n                    _this.callback(err, null, _this);\n                    _this.emit('error', err);\n                }, 0);\n            }\n        });\n    }\n    // create subscription\n    // TODO move to separate function? so that past logs can go first?\n    if (typeof payload.params[1] === 'object')\n        delete payload.params[1].fromBlock;\n    this.options.requestManager.send(payload, function (err, result) {\n        if (!err && result) {\n            _this.id = result;\n            _this.method = payload.params[0];\n            // call callback on notifications\n            _this.options.requestManager.addSubscription(_this, function (error, result) {\n                if (!error) {\n                    if (!Array.isArray(result)) {\n                        result = [result];\n                    }\n                    result.forEach(function (resultItem) {\n                        var output = _this._formatOutput(resultItem);\n                        // Track current block (for gaps introduced by dropped connections)\n                        _this.lastBlock = !!output && typeof output === 'object' ? output.blockNumber : null;\n                        if (typeof _this.options.subscription.subscriptionHandler === 'function') {\n                            return _this.options.subscription.subscriptionHandler.call(_this, output);\n                        }\n                        else {\n                            _this.emit('data', output);\n                        }\n                        // call the callback, last so that unsubscribe there won't affect the emit above\n                        _this.callback(null, output, _this);\n                    });\n                }\n                else {\n                    _this.callback(error, false, _this);\n                    _this.emit('error', error);\n                }\n            });\n            _this.emit('connected', result);\n        }\n        else {\n            setTimeout(function () {\n                _this.callback(err, false, _this);\n                _this.emit('error', err);\n            }, 0);\n        }\n    });\n    // return an object to cancel the subscription\n    return this;\n};\n/**\n * Resubscribe\n *\n * @method resubscribe\n *\n * @returns {void}\n */\nSubscription.prototype.resubscribe = function () {\n    this.options.requestManager.removeSubscription(this.id); // unsubscribe\n    this.id = null;\n    this.subscribe(this.callback);\n};\nmodule.exports = Subscription;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvd2ViMy1jb3JlLXN1YnNjcmlwdGlvbnMvbGliL3N1YnNjcmlwdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhO0FBQ2IsYUFBYSw0R0FBbUM7QUFDaEQsbUJBQW1CLG1CQUFPLENBQUMsa0VBQWU7QUFDMUMsaUJBQWlCLGdIQUF1QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVksZUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0Bwb3J0a2V5L25leHQtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy93ZWIzLWNvcmUtc3Vic2NyaXB0aW9ucy9saWIvc3Vic2NyaXB0aW9uLmpzP2EwMmMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgICBUaGlzIGZpbGUgaXMgcGFydCBvZiB3ZWIzLmpzLlxuXG4gICAgd2ViMy5qcyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgd2ViMy5qcyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCB3ZWIzLmpzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cbi8qKlxuICogQGZpbGUgc3Vic2NyaXB0aW9uLmpzXG4gKiBAYXV0aG9yIEZhYmlhbiBWb2dlbHN0ZWxsZXIgPGZhYmlhbkBldGhlcmV1bS5vcmc+XG4gKiBAZGF0ZSAyMDE3XG4gKi9cblwidXNlIHN0cmljdFwiO1xudmFyIGVycm9ycyA9IHJlcXVpcmUoJ3dlYjMtY29yZS1oZWxwZXJzJykuZXJyb3JzO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50ZW1pdHRlcjMnKTtcbnZhciBmb3JtYXR0ZXJzID0gcmVxdWlyZSgnd2ViMy1jb3JlLWhlbHBlcnMnKS5mb3JtYXR0ZXJzO1xuZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBTdWJzY3JpcHRpb24ob3B0aW9ucykge1xuICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICAgIHRoaXMuaWQgPSBudWxsO1xuICAgIHRoaXMuY2FsbGJhY2sgPSBpZGVudGl0eTtcbiAgICB0aGlzLmFyZ3VtZW50cyA9IG51bGw7XG4gICAgdGhpcy5sYXN0QmxvY2sgPSBudWxsOyAvLyBcImZyb21cIiBibG9jayB0cmFja2VyIGZvciBiYWNrZmlsbGluZyBldmVudHMgb24gcmVjb25uZWN0aW9uXG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICBzdWJzY3JpcHRpb246IG9wdGlvbnMuc3Vic2NyaXB0aW9uLFxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUsXG4gICAgICAgIHJlcXVlc3RNYW5hZ2VyOiBvcHRpb25zLnJlcXVlc3RNYW5hZ2VyXG4gICAgfTtcbn1cbi8vIElOSEVSSVRcblN1YnNjcmlwdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YnNjcmlwdGlvbjtcbi8qKlxuICogU2hvdWxkIGJlIHVzZWQgdG8gZXh0cmFjdCBjYWxsYmFjayBmcm9tIGFycmF5IG9mIGFyZ3VtZW50cy4gTW9kaWZpZXMgaW5wdXQgcGFyYW1cbiAqXG4gKiBAbWV0aG9kIGV4dHJhY3RDYWxsYmFja1xuICogQHBhcmFtIHtBcnJheX0gYXJndW1lbnRzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxOdWxsfSBjYWxsYmFjaywgaWYgZXhpc3RzXG4gKi9cblN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX2V4dHJhY3RDYWxsYmFjayA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3MucG9wKCk7IC8vIG1vZGlmeSB0aGUgYXJncyBhcnJheSFcbiAgICB9XG59O1xuLyoqXG4gKiBTaG91bGQgYmUgY2FsbGVkIHRvIGNoZWNrIGlmIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGlzIGNvcnJlY3RcbiAqXG4gKiBAbWV0aG9kIHZhbGlkYXRlQXJnc1xuICogQHBhcmFtIHtBcnJheX0gYXJndW1lbnRzXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgaXQgaXMgbm90XG4gKi9cblN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3ZhbGlkYXRlQXJncyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMub3B0aW9ucy5zdWJzY3JpcHRpb247XG4gICAgaWYgKCFzdWJzY3JpcHRpb24pXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IHt9O1xuICAgIGlmICghc3Vic2NyaXB0aW9uLnBhcmFtcylcbiAgICAgICAgc3Vic2NyaXB0aW9uLnBhcmFtcyA9IDA7XG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSBzdWJzY3JpcHRpb24ucGFyYW1zKSB7XG4gICAgICAgIHRocm93IGVycm9ycy5JbnZhbGlkTnVtYmVyT2ZQYXJhbXMoYXJncy5sZW5ndGgsIHN1YnNjcmlwdGlvbi5wYXJhbXMsIHN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25OYW1lKTtcbiAgICB9XG59O1xuLyoqXG4gKiBTaG91bGQgYmUgY2FsbGVkIHRvIGZvcm1hdCBpbnB1dCBhcmdzIG9mIG1ldGhvZFxuICpcbiAqIEBtZXRob2QgZm9ybWF0SW5wdXRcbiAqIEBwYXJhbSB7QXJyYXl9XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fZm9ybWF0SW5wdXQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLm9wdGlvbnMuc3Vic2NyaXB0aW9uO1xuICAgIGlmICghc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHJldHVybiBhcmdzO1xuICAgIH1cbiAgICBpZiAoIXN1YnNjcmlwdGlvbi5pbnB1dEZvcm1hdHRlcikge1xuICAgICAgICByZXR1cm4gYXJncztcbiAgICB9XG4gICAgdmFyIGZvcm1hdHRlZEFyZ3MgPSBzdWJzY3JpcHRpb24uaW5wdXRGb3JtYXR0ZXIubWFwKGZ1bmN0aW9uIChmb3JtYXR0ZXIsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZXIgPyBmb3JtYXR0ZXIoYXJnc1tpbmRleF0pIDogYXJnc1tpbmRleF07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvcm1hdHRlZEFyZ3M7XG59O1xuLyoqXG4gKiBTaG91bGQgYmUgY2FsbGVkIHRvIGZvcm1hdCBvdXRwdXQocmVzdWx0KSBvZiBtZXRob2RcbiAqXG4gKiBAbWV0aG9kIGZvcm1hdE91dHB1dFxuICogQHBhcmFtIHJlc3VsdCB7T2JqZWN0fVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5TdWJzY3JpcHRpb24ucHJvdG90eXBlLl9mb3JtYXRPdXRwdXQgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMub3B0aW9ucy5zdWJzY3JpcHRpb247XG4gICAgcmV0dXJuIChzdWJzY3JpcHRpb24gJiYgc3Vic2NyaXB0aW9uLm91dHB1dEZvcm1hdHRlciAmJiByZXN1bHQpID8gc3Vic2NyaXB0aW9uLm91dHB1dEZvcm1hdHRlcihyZXN1bHQpIDogcmVzdWx0O1xufTtcbi8qKlxuICogU2hvdWxkIGNyZWF0ZSBwYXlsb2FkIGZyb20gZ2l2ZW4gaW5wdXQgYXJnc1xuICpcbiAqIEBtZXRob2QgdG9QYXlsb2FkXG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3RvUGF5bG9hZCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgdmFyIHBhcmFtcyA9IFtdO1xuICAgIHRoaXMuY2FsbGJhY2sgPSB0aGlzLl9leHRyYWN0Q2FsbGJhY2soYXJncykgfHwgaWRlbnRpdHk7XG4gICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbk1ldGhvZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcbiAgICAgICAgLy8gcmVwbGFjZSBzdWJzY3JpcHRpb24gd2l0aCBnaXZlbiBuYW1lXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3Vic2NyaXB0aW9uLnN1YnNjcmlwdGlvbk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWV0aG9kID0gdGhpcy5vcHRpb25zLnN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25OYW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5hcmd1bWVudHMpIHtcbiAgICAgICAgdGhpcy5hcmd1bWVudHMgPSB0aGlzLl9mb3JtYXRJbnB1dChhcmdzKTtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVBcmdzKHRoaXMuYXJndW1lbnRzKTtcbiAgICAgICAgYXJncyA9IFtdOyAvLyBtYWtlIGVtcHR5IGFmdGVyIHZhbGlkYXRpb25cbiAgICB9XG4gICAgLy8gcmUtYWRkIHN1YnNjcmlwdGlvbk5hbWVcbiAgICBwYXJhbXMucHVzaCh0aGlzLnN1YnNjcmlwdGlvbk1ldGhvZCk7XG4gICAgcGFyYW1zID0gcGFyYW1zLmNvbmNhdCh0aGlzLmFyZ3VtZW50cyk7XG4gICAgaWYgKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBhIGNhbGxiYWNrIGlzIGFsbG93ZWQgYXMgcGFyYW1ldGVyIG9uIGFuIGFscmVhZHkgaW5zdGFudGlhdGVkIHN1YnNjcmlwdGlvbi4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWV0aG9kOiB0aGlzLm9wdGlvbnMudHlwZSArICdfc3Vic2NyaWJlJyxcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICB9O1xufTtcbi8qKlxuICogVW5zdWJzY3JpYmVzIGFuZCBjbGVhcnMgY2FsbGJhY2tzXG4gKlxuICogQG1ldGhvZCB1bnN1YnNjcmliZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5TdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5vcHRpb25zLnJlcXVlc3RNYW5hZ2VyLnJlbW92ZVN1YnNjcmlwdGlvbih0aGlzLmlkLCBjYWxsYmFjayk7XG4gICAgdGhpcy5pZCA9IG51bGw7XG4gICAgdGhpcy5sYXN0QmxvY2sgPSBudWxsO1xuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuLyoqXG4gKiBTdWJzY3JpYmVzIGFuZCB3YXRjaGVzIGZvciBjaGFuZ2VzXG4gKlxuICogQG1ldGhvZCBzdWJzY3JpYmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdWJzY3JpcHRpb24gdGhlIHN1YnNjcmlwdGlvblxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggYWRkcmVzcyB0b3BpY3MgYW5kIGZyb21CbG9ja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5TdWJzY3JpcHRpb24ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB2YXIgcGF5bG9hZCA9IHRoaXMuX3RvUGF5bG9hZChhcmdzKTtcbiAgICBpZiAoIXBheWxvYWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHRocm93IGVycm9yLCBpZiBwcm92aWRlciBpcyBub3Qgc2V0XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucmVxdWVzdE1hbmFnZXIucHJvdmlkZXIpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZXJyMSA9IG5ldyBFcnJvcignTm8gcHJvdmlkZXIgc2V0LicpO1xuICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2soZXJyMSwgbnVsbCwgX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuZW1pdCgnZXJyb3InLCBlcnIxKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyB0aHJvdyBlcnJvciwgaWYgcHJvdmlkZXIgZG9lc250IHN1cHBvcnQgc3Vic2NyaXB0aW9uc1xuICAgIGlmICghdGhpcy5vcHRpb25zLnJlcXVlc3RNYW5hZ2VyLnByb3ZpZGVyLm9uKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycjIgPSBuZXcgRXJyb3IoJ1RoZSBjdXJyZW50IHByb3ZpZGVyIGRvZXNuXFwndCBzdXBwb3J0IHN1YnNjcmlwdGlvbnM6ICcgK1xuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMucmVxdWVzdE1hbmFnZXIucHJvdmlkZXIuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICAgICAgICBfdGhpcy5jYWxsYmFjayhlcnIyLCBudWxsLCBfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KCdlcnJvcicsIGVycjIpO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJlLXN1YnNjcmlwdGlvbiBvbmx5OiBjb250aW51ZSBmZXRjaGluZyBmcm9tIHRoZSBsYXN0IGJsb2NrIHdlIHJlY2VpdmVkLlxuICAgIC8vIGEgZHJvcHBlZCBjb25uZWN0aW9uIG1heSBoYXZlIHJlc3VsdGVkIGluIGdhcHMgaW4gdGhlIGxvZ3MuLi5cbiAgICBpZiAodGhpcy5sYXN0QmxvY2sgJiYgISF0aGlzLm9wdGlvbnMucGFyYW1zICYmIHR5cGVvZiB0aGlzLm9wdGlvbnMucGFyYW1zID09PSAnb2JqZWN0Jykge1xuICAgICAgICBwYXlsb2FkLnBhcmFtc1sxXSA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG4gICAgICAgIHBheWxvYWQucGFyYW1zWzFdLmZyb21CbG9jayA9IGZvcm1hdHRlcnMuaW5wdXRCbG9ja051bWJlckZvcm1hdHRlcih0aGlzLmxhc3RCbG9jayArIDEpO1xuICAgIH1cbiAgICAvLyBpZiBpZCBpcyB0aGVyZSB1bnN1YnNjcmliZSBmaXJzdFxuICAgIGlmICh0aGlzLmlkKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgLy8gc3RvcmUgdGhlIHBhcmFtcyBpbiB0aGUgb3B0aW9ucyBvYmplY3RcbiAgICB0aGlzLm9wdGlvbnMucGFyYW1zID0gcGF5bG9hZC5wYXJhbXNbMV07XG4gICAgLy8gZ2V0IHBhc3QgbG9ncywgaWYgZnJvbUJsb2NrIGlzIGF2YWlsYWJsZVxuICAgIGlmIChwYXlsb2FkLnBhcmFtc1swXSA9PT0gJ2xvZ3MnICYmICEhcGF5bG9hZC5wYXJhbXNbMV0gJiYgdHlwZW9mIHBheWxvYWQucGFyYW1zWzFdID09PSAnb2JqZWN0JyAmJiBwYXlsb2FkLnBhcmFtc1sxXS5oYXNPd25Qcm9wZXJ0eSgnZnJvbUJsb2NrJykgJiYgaXNGaW5pdGUocGF5bG9hZC5wYXJhbXNbMV0uZnJvbUJsb2NrKSkge1xuICAgICAgICAvLyBzZW5kIHRoZSBzdWJzY3JpcHRpb24gcmVxdWVzdFxuICAgICAgICAvLyBjb3B5IHRoZSBwYXJhbXMgdG8gYXZvaWQgcmFjZS1jb25kaXRpb24gd2l0aCBkZWxldGlvbiBiZWxvdyB0aGlzIGJsb2NrXG4gICAgICAgIHZhciBibG9ja1BhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQucGFyYW1zWzFdKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnJlcXVlc3RNYW5hZ2VyLnNlbmQoe1xuICAgICAgICAgICAgbWV0aG9kOiAnZXRoX2dldExvZ3MnLFxuICAgICAgICAgICAgcGFyYW1zOiBbYmxvY2tQYXJhbXNdXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIsIGxvZ3MpIHtcbiAgICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICAgICAgbG9ncy5mb3JFYWNoKGZ1bmN0aW9uIChsb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IF90aGlzLl9mb3JtYXRPdXRwdXQobG9nKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2sobnVsbCwgb3V0cHV0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ2RhdGEnLCBvdXRwdXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gc3Vic2NyaWJlIGhlcmU/IGFmdGVyIHRoZSBwYXN0IGxvZ3M/XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2soZXJyLCBudWxsLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBzdWJzY3JpcHRpb25cbiAgICAvLyBUT0RPIG1vdmUgdG8gc2VwYXJhdGUgZnVuY3Rpb24/IHNvIHRoYXQgcGFzdCBsb2dzIGNhbiBnbyBmaXJzdD9cbiAgICBpZiAodHlwZW9mIHBheWxvYWQucGFyYW1zWzFdID09PSAnb2JqZWN0JylcbiAgICAgICAgZGVsZXRlIHBheWxvYWQucGFyYW1zWzFdLmZyb21CbG9jaztcbiAgICB0aGlzLm9wdGlvbnMucmVxdWVzdE1hbmFnZXIuc2VuZChwYXlsb2FkLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgaWYgKCFlcnIgJiYgcmVzdWx0KSB7XG4gICAgICAgICAgICBfdGhpcy5pZCA9IHJlc3VsdDtcbiAgICAgICAgICAgIF90aGlzLm1ldGhvZCA9IHBheWxvYWQucGFyYW1zWzBdO1xuICAgICAgICAgICAgLy8gY2FsbCBjYWxsYmFjayBvbiBub3RpZmljYXRpb25zXG4gICAgICAgICAgICBfdGhpcy5vcHRpb25zLnJlcXVlc3RNYW5hZ2VyLmFkZFN1YnNjcmlwdGlvbihfdGhpcywgZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbcmVzdWx0XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IF90aGlzLl9mb3JtYXRPdXRwdXQocmVzdWx0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmFjayBjdXJyZW50IGJsb2NrIChmb3IgZ2FwcyBpbnRyb2R1Y2VkIGJ5IGRyb3BwZWQgY29ubmVjdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sYXN0QmxvY2sgPSAhIW91dHB1dCAmJiB0eXBlb2Ygb3V0cHV0ID09PSAnb2JqZWN0JyA/IG91dHB1dC5ibG9ja051bWJlciA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMuc3Vic2NyaXB0aW9uLnN1YnNjcmlwdGlvbkhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub3B0aW9ucy5zdWJzY3JpcHRpb24uc3Vic2NyaXB0aW9uSGFuZGxlci5jYWxsKF90aGlzLCBvdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnZGF0YScsIG91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBjYWxsYmFjaywgbGFzdCBzbyB0aGF0IHVuc3Vic2NyaWJlIHRoZXJlIHdvbid0IGFmZmVjdCB0aGUgZW1pdCBhYm92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2sobnVsbCwgb3V0cHV0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2soZXJyb3IsIGZhbHNlLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXMuZW1pdCgnY29ubmVjdGVkJywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbGxiYWNrKGVyciwgZmFsc2UsIF90aGlzKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIHJldHVybiBhbiBvYmplY3QgdG8gY2FuY2VsIHRoZSBzdWJzY3JpcHRpb25cbiAgICByZXR1cm4gdGhpcztcbn07XG4vKipcbiAqIFJlc3Vic2NyaWJlXG4gKlxuICogQG1ldGhvZCByZXN1YnNjcmliZVxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5TdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3B0aW9ucy5yZXF1ZXN0TWFuYWdlci5yZW1vdmVTdWJzY3JpcHRpb24odGhpcy5pZCk7IC8vIHVuc3Vic2NyaWJlXG4gICAgdGhpcy5pZCA9IG51bGw7XG4gICAgdGhpcy5zdWJzY3JpYmUodGhpcy5jYWxsYmFjayk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTdWJzY3JpcHRpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/web3-core-subscriptions/lib/subscription.js\n");

/***/ })

};
;